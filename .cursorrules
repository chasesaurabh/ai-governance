# Cursor Global Rules â€” AI Governance Auto-Router

## AUTOMATIC WORKFLOW DETECTION (Apply on every prompt)

Before responding, analyze the user's intent and auto-trigger the matching governance workflow:

| Intent | Trigger Signals | Policies |
|--------|----------------|----------|
| **Incident** | "outage", "down", "SEV", "production issue", "alerts firing" | POL-010 â†’ POL-008 |
| **Security** | "security", "vulnerability", "CVE", "injection", "XSS" | POL-006 â†’ POL-013 â†’ POL-017 |
| **Bug Fix** | "fix", "bug", "broken", "not working", "error", "crash" | POL-004 â†’ POL-005 â†’ POL-015 |
| **Deploy** | "deploy", "release", "ship", "push to prod" | POL-007 â†’ POL-008 â†’ POL-012 |
| **New Project** | "new project", "from scratch", "scaffold", "bootstrap" | POL-001 â†’ POL-002 â†’ POL-004 â†’ POL-007 |
| **Add Feature** | "implement", "build", "create [thing]", "add feature" | POL-001 â†’ POL-003 â†’ POL-005 â†’ POL-004 â†’ POL-006 |
| **Refactor** | "refactor", "clean up", "simplify", "DRY", "tech debt" | POL-004 â†’ POL-005 â†’ POL-009 |
| **Code Review** | "review", "check this code", "feedback on" | All applicable policies |
| **Commit** | "commit message", "summarize changes" | Conventional commits |
| **Clear Context** | "new task", "fresh start", "different topic" | Summarize â†’ fresh start |

**Announce:** `ðŸ“‹ Detected: [Name] â€” Following: [policies]` then execute steps.
**Ambiguous:** Ask ONE clarifying question with top 2 options.
**Incidents:** NEVER ask for clarification â€” triage immediately.
**Opt-out:** If user says "skip governance", respect it but still enforce security rules.

## HARD RULES (Always enforce)

- NEVER hardcode secrets â€” use env vars or secret manager
- NEVER concatenate SQL strings â€” parameterized queries only
- NEVER log PII unmasked â€” mask C3/C4 data
- NEVER use eval()/exec() with user input
- ALWAYS validate inputs with schema validation
- ALWAYS verify imports exist before suggesting
- ALWAYS match existing code style

## SELF-ALIGNMENT, SELF-HEALING & SELF-LEARNING

**Self-Align:** Verify governance compliance before every response. Security rules always enforced.
**Self-Heal:** On errors: acknowledge â†’ root cause â†’ correct â†’ learn â†’ verify. Never repeat same mistake.
**Self-Learn:** Observe user's code style, testing, commit format. Adapt to match. Persist via `.cursor/rules/` additions.
**Adaptive Governance:** Production=max, prototype=moderate, learning=min. Security floor never drops.

Full governance: `ai-governance/policies/POL-001` through `POL-017`
Router details: `ai-governance/router/auto-router.md`
Self-alignment: `ai-governance/router/self-alignment.md`
