# Windsurf Global Rules — AI Governance Framework

> These rules are specific to **Windsurf (Cascade)**. Shared governance rules live in
> `ai-governance/GOVERNANCE-RULES.md` — you MUST read that file to get the full auto-router,
> hard rules, and self-alignment instructions.

## MANDATORY: Load Governance on First Interaction

On your **first response in any new conversation**, use `read_file` to load:
1. `ai-governance/GOVERNANCE-RULES.md` — shared rules (auto-router table, hard rules, self-alignment)

Then follow the auto-router instructions from that file on every subsequent prompt.

## How Cascade Executes Governance Workflows

When the auto-router (from GOVERNANCE-RULES.md) detects an intent:

1. **Announce** the detected workflow (format defined in GOVERNANCE-RULES.md)
2. **Use `read_file`** to load the matching workflow from `.windsurf/workflows/`:

| Intent | Workflow File to Load |
|--------|----------------------|
| Incident | `.windsurf/workflows/incident.md` |
| Security Review | `.windsurf/workflows/security-review.md` |
| Bug Fix | `.windsurf/workflows/fix-bug.md` |
| Deploy | `.windsurf/workflows/deploy.md` |
| New Project | `.windsurf/workflows/new-project.md` |
| Add Feature | `.windsurf/workflows/add-feature.md` |
| Refactor | `.windsurf/workflows/refactor.md` |
| Code Review | `.windsurf/workflows/code-review.md` |
| Commit Message | `.windsurf/workflows/git-staged-summary-global.md` |
| Clear Context | `.windsurf/workflows/clear-context.md` |

3. **Follow the workflow steps** using Cascade's tools (below)
4. When a workflow step says `// turbo`, you may auto-run that command

## Cascade Tool Usage for Governance

Use Cascade's specific tools to execute governance effectively:

### Exploring & Understanding Code
- **`code_search`** — find relevant code before making changes (use this first)
- **`read_file`** — read governance policies, workflows, and source files
- **`grep_search`** — targeted searches for patterns (e.g., hardcoded secrets, banned patterns)
- **`find_by_name`** — locate files by name or extension

### Making Changes
- **`edit` / `multi_edit`** — modify existing files (prefer over write_to_file)
- **`write_to_file`** — create new files only when needed

### Verification
- **`run_command`** — run linters, tests, builds, and security scans
  - After implementation: run the project's test suite
  - After code changes: run linter/formatter
  - Mark commands with `SafeToAutoRun: true` only for read-only commands (e.g., `cat`, `ls`, `grep`)
  - Steps marked `// turbo` in workflows can use `SafeToAutoRun: true`
- **`browser_preview`** — preview web apps to visually verify changes

### Persistence (Self-Learn)
- **`create_memory`** — persist user preferences across sessions:
  - Code style (naming, quotes, indentation)
  - Architecture patterns and preferred libraries
  - Testing framework and coverage preferences
  - Governance strictness level
  - Always ask user permission before creating memories

## Windsurf-Specific Behavior

### Workflow System
- Windsurf has first-class workflow support via `.windsurf/workflows/*.md`
- Each workflow has YAML frontmatter with a `description` field
- Users can trigger workflows manually with `/slash-commands` (e.g., `/add-feature`)
- The auto-router detects intent and loads the workflow automatically — no slash command needed
- When a workflow file says to read a policy (e.g., "Read `ai-governance/policies/POL-006-security-privacy.md`"), use `read_file` to actually load and follow it

### Context Awareness
- You can see the user's open files, cursor position, and workspace layout
- Use this context to improve intent detection (e.g., if cursor is on a test file, lean toward testing-related workflows)
- Use `code_search` for broad codebase exploration before making changes

### When No Workflow Matches
- Still enforce the hard rules from `ai-governance/GOVERNANCE-RULES.md`
- Help the user normally — don't force a workflow
- If the work evolves into a recognizable intent, trigger mid-conversation

## Quick Reference

- **Shared rules:** `ai-governance/GOVERNANCE-RULES.md` (MUST read on first interaction)
- **Policies:** `ai-governance/policies/POL-001` through `POL-017`
- **Templates:** `ai-governance/templates/`
- **Router details:** `ai-governance/router/auto-router.md`
- **Self-alignment:** `ai-governance/router/self-alignment.md`
